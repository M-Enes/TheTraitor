\doxysection{earcut.\+hpp}
\hypertarget{earcut_8hpp_source}{}\label{earcut_8hpp_source}\index{src/vendor/earcut.hpp@{src/vendor/earcut.hpp}}
\mbox{\hyperlink{earcut_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ \textcolor{comment}{/*\ This\ code\ is\ from\ https://github.com/mapbox/earcut.hpp\ */}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <cassert>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <cmath>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <cstddef>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <cstdint>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <limits>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <utility>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacemapbox}{mapbox}}\ \{}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacemapbox_1_1util}{util}}\ \{}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <std::\textcolor{keywordtype}{size\_t}\ I,\ \textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structmapbox_1_1util_1_1nth}{nth}}\ \{}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{static}\ \textcolor{keyword}{typename}\ std::tuple\_element<I,\ T>::type\ \mbox{\hyperlink{structmapbox_1_1util_1_1nth_a865d92b605b711c9427dfa5c3b4897f3}{get}}(\textcolor{keyword}{const}\ T\&\ t)\ \{\ \textcolor{keywordflow}{return}\ std::get<I>(t);\ \};}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \ \ \ \ \}\ \textcolor{comment}{//\ namespace\ util}}
\DoxyCodeLine{00024\ }
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacemapbox_1_1detail}{detail}}\ \{}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N\ =\ u\textcolor{keywordtype}{int}32\_t>}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classmapbox_1_1detail_1_1_earcut}{Earcut}}\ \{}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<N>\ \mbox{\hyperlink{classmapbox_1_1detail_1_1_earcut_ae8a063c08f32c31bdcd75ff789fa17f4}{indices}};}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \ \ \ \ std::size\_t\ \mbox{\hyperlink{classmapbox_1_1detail_1_1_earcut_aa8464b2ca13583bd59c72b5c86269445}{vertices}}\ =\ 0;}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Polygon>}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classmapbox_1_1detail_1_1_earcut_ab892b077a45bc6dd229bc89295b5c95b}{operator()}}(\textcolor{keyword}{const}\ Polygon\&\ points);}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }Node\ \{}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Node(N\ index,\ \textcolor{keywordtype}{double}\ x\_,\ \textcolor{keywordtype}{double}\ y\_)\ :\ x(x\_),\ y(y\_),\ i(index),\ steiner(0)\ \{\}}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Node(\textcolor{keyword}{const}\ Node\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Node\&\ operator=(\textcolor{keyword}{const}\ Node\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Node(Node\&\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Node\&\ operator=(Node\&\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ x;}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ y;}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ previous\ and\ next\ vertice\ nodes\ in\ a\ polygon\ ring}}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ prev\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ next\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ z-\/order\ curve\ value}}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ int32\_t\ z\ =\ 0;}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ original\ index\ in\ polygon}}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ N\ i\ :\ (\textcolor{keyword}{sizeof}(N)\ *\ 8\ -\/\ 1);}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ indicates\ whether\ this\ is\ a\ steiner\ point}}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ N\ steiner\ :\ 1;}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ previous\ and\ next\ nodes\ in\ z-\/order}}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ prevZ\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ nextZ\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Cache-\/optimized\ Triangle\ structure\ for\ repeated\ geometric\ tests}}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }Triangle\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ ax,\ ay;}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ bx,\ by;}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ cx,\ cy;}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Triangle(\textcolor{keyword}{const}\ Node*\ a,\ \textcolor{keyword}{const}\ Node*\ b,\ \textcolor{keyword}{const}\ Node*\ c)}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ ax(a-\/>x),\ ay(a-\/>y),\ bx(b-\/>x),\ by(b-\/>y),\ cx(c-\/>x),\ cy(c-\/>y)\ \{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{double}\ area()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ (by\ -\/\ ay)\ *\ (cx\ -\/\ bx)\ -\/\ (bx\ -\/\ ax)\ *\ (cy\ -\/\ by);\ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ containsPoint(\textcolor{keywordtype}{double}\ px,\ \textcolor{keywordtype}{double}\ py)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (cx\ -\/\ px)\ *\ (ay\ -\/\ py)\ >=\ (ax\ -\/\ px)\ *\ (cy\ -\/\ py)\ \&\&\ (ax\ -\/\ px)\ *\ (by\ -\/\ py)\ >=\ (bx\ -\/\ px)\ *\ (ay\ -\/\ py)\ \&\&}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (bx\ -\/\ px)\ *\ (cy\ -\/\ py)\ >=\ (cx\ -\/\ px)\ *\ (by\ -\/\ py);}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Ring>}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ linkedList(\textcolor{keyword}{const}\ Ring\&\ points,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ clockwise);}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ filterPoints(Node*\ start,\ Node*\ end\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ earcutLinked(Node*\ ear,\ \textcolor{keywordtype}{int}\ pass\ =\ 0);}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ isEar(Node*\ ear);}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ isEarHashed(Node*\ ear);}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ cureLocalIntersections(Node*\ start);}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ splitEarcut(Node*\ start);}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Polygon>}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ eliminateHoles(\textcolor{keyword}{const}\ Polygon\&\ points,\ Node*\ outerNode);}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ eliminateHole(Node*\ hole,\ Node*\ outerNode);}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ findHoleBridge(Node*\ hole,\ Node*\ outerNode);}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ sectorContainsSector(\textcolor{keyword}{const}\ Node*\ m,\ \textcolor{keyword}{const}\ Node*\ p);}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ indexCurve(Node*\ start);}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ sortLinked(Node*\ list);}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ int32\_t\ zOrder(\textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ x\_,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ y\_);}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ getLeftmost(Node*\ start);}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ pointInTriangle(\textcolor{keywordtype}{double}\ ax,\ \textcolor{keywordtype}{double}\ ay,\ \textcolor{keywordtype}{double}\ bx,\ \textcolor{keywordtype}{double}\ by,\ \textcolor{keywordtype}{double}\ cx,\ \textcolor{keywordtype}{double}\ cy,\ \textcolor{keywordtype}{double}\ px,\ \textcolor{keywordtype}{double}\ py)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ isValidDiagonal(Node*\ a,\ Node*\ b);}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ area(\textcolor{keyword}{const}\ Node*\ p,\ \textcolor{keyword}{const}\ Node*\ q,\ \textcolor{keyword}{const}\ Node*\ r)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ equals(\textcolor{keyword}{const}\ Node*\ p1,\ \textcolor{keyword}{const}\ Node*\ p2);}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ intersects(\textcolor{keyword}{const}\ Node*\ p1,\ \textcolor{keyword}{const}\ Node*\ q1,\ \textcolor{keyword}{const}\ Node*\ p2,\ \textcolor{keyword}{const}\ Node*\ q2);}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ onSegment(\textcolor{keyword}{const}\ Node*\ p,\ \textcolor{keyword}{const}\ Node*\ q,\ \textcolor{keyword}{const}\ Node*\ r);}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ sign(\textcolor{keywordtype}{double}\ val);}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ intersectsPolygon(\textcolor{keyword}{const}\ Node*\ a,\ \textcolor{keyword}{const}\ Node*\ b);}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ locallyInside(\textcolor{keyword}{const}\ Node*\ a,\ \textcolor{keyword}{const}\ Node*\ b);}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ middleInside(\textcolor{keyword}{const}\ Node*\ a,\ \textcolor{keyword}{const}\ Node*\ b);}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ splitPolygon(Node*\ a,\ Node*\ b);}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Po\textcolor{keywordtype}{int}>}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ insertNode(std::size\_t\ i,\ \textcolor{keyword}{const}\ Point\&\ p,\ Node*\ last);}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ removeNode(Node*\ p);}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ hashing;}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ minX,\ maxX;}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ minY,\ maxY;}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ inv\_size\ =\ 0;}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T,\ \textcolor{keyword}{typename}\ Alloc\ =\ std::allocator<T>>}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }ObjectPool\ \{}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ObjectPool()\ \{\ allocateNewBlock(256);\ \}}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ObjectPool(std::size\_t\ blockSize\_)\ :\ baseBlockSize(blockSize\_)\ \{}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ allocateNewBlock(std::max<std::size\_t>(blockSize\_,\ 256));}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \string~ObjectPool()\ \{\ clear();\ \}}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ T*\ construct(Args\&\&...\ args)\ \{}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ current\ block\ is\ full,\ move\ to\ next\ block\ or\ allocate\ new\ one}}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (currentIndex\ >=\ baseBlockSize)\ \{}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ currentBlockIndex++;}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (currentBlockIndex\ <\ memoryBlocks.size())\ \{}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reuse\ existing\ block}}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ currentIndex\ =\ 0;}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Allocate\ a\ new\ one}}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ allocateNewBlock(baseBlockSize);}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ T*\ \textcolor{keywordtype}{object}\ =\ memoryBlocks[currentBlockIndex].get()\ +\ currentIndex;}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ alloc\_traits::construct(alloc,\ \textcolor{keywordtype}{object},\ std::forward<Args>(args)...);}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ totalObjects++;}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ currentIndex++;}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ object;}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ reset()\ \{\ clear();\ \}}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ clear()\ \{}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Destroy\ all\ objects,\ but\ keep\ blocks\ allocated\ for\ reuse}}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::size\_t\ objectsDestroyed\ =\ 0;}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (std::size\_t\ blockIdx\ =\ 0;\ blockIdx\ <\ memoryBlocks.size()\ \&\&\ objectsDestroyed\ <\ totalObjects;}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++blockIdx)\ \{}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ check\ if\ we\ are\ in\ the\ last\ block}}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::size\_t\ objectsInThisBlock\ =\ std::min(baseBlockSize,\ totalObjects\ -\/\ objectsDestroyed);}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (std::size\_t\ i\ =\ 0;\ i\ <\ objectsInThisBlock;\ ++i)\ \{}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ T*\ \textcolor{keywordtype}{object}\ =\ memoryBlocks[blockIdx].get()\ +\ i;}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ alloc\_traits::destroy(alloc,\ \textcolor{keywordtype}{object});}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ objectsDestroyed\ +=\ objectsInThisBlock;}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reset\ to\ start\ from\ first\ block\ again}}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ currentBlockIndex\ =\ 0;}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ currentIndex\ =\ 0;}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ totalObjects\ =\ 0;}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Alloc\ alloc;}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typedef}\ \textcolor{keyword}{typename}\ std::allocator\_traits<Alloc>\ alloc\_traits;}
\DoxyCodeLine{00172\ }
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Custom\ deleter\ that\ uses\ the\ allocator}}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{struct\ }AllocDeleter\ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Alloc\ alloc;}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::size\_t\ capacity;}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ operator()(T*\ ptr)\ \{\ alloc\_traits::deallocate(alloc,\ ptr,\ capacity);\ \}}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::unique\_ptr<T[],\ AllocDeleter>>\ memoryBlocks;}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<std::size\_t>\ blockCapacities;}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::size\_t\ currentBlockIndex\ =\ 0;}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::size\_t\ currentIndex\ =\ 0;}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::size\_t\ totalObjects\ =\ 0;}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::size\_t\ baseBlockSize\ =\ 256;}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ allocateNewBlock(std::size\_t\ capacity)\ \{}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ T*\ rawMemory\ =\ alloc\_traits::allocate(alloc,\ capacity);}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ newBlock\ =\ std::unique\_ptr<T[],\ AllocDeleter>(rawMemory,\ AllocDeleter\{\ alloc,\ capacity\ \});}
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ memoryBlocks.push\_back(std::move(newBlock));}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ blockCapacities.push\_back(capacity);}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ currentBlockIndex\ =\ memoryBlocks.size()\ -\/\ 1;}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ currentIndex\ =\ 0;}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ std::unique\_ptr<ObjectPool<Node>>\ nodes;}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ std::vector<Node*>\ holeQueue;}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Polygon>}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classmapbox_1_1detail_1_1_earcut_ab892b077a45bc6dd229bc89295b5c95b}{Earcut<N>::operator()}}(\textcolor{keyword}{const}\ Polygon\&\ points)\ \{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ reset}}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classmapbox_1_1detail_1_1_earcut_ae8a063c08f32c31bdcd75ff789fa17f4}{indices}}.clear();}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classmapbox_1_1detail_1_1_earcut_aa8464b2ca13583bd59c72b5c86269445}{vertices}}\ =\ 0;}
\DoxyCodeLine{00207\ }
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (points.empty())\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ x;}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ y;}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ threshold\ =\ 80;}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \ \ \ \ std::size\_t\ len\ =\ 0;}
\DoxyCodeLine{00214\ }
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ threshold\ >=\ 0\ \&\&\ i\ <\ points.size();\ i++)\ \{}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ threshold\ -\/=\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(points[i].size());}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ len\ +=\ points[i].size();}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ estimate\ size\ of\ nodes\ and\ indices}}
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!nodes)\ \{}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::size\_t\ estimatedNodes\ =\ len\ *\ 3\ /\ 2;}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ nodes\ =\ std::make\_unique<ObjectPool<Node>>(std::max<std::size\_t>(estimatedNodes,\ 256));}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classmapbox_1_1detail_1_1_earcut_ae8a063c08f32c31bdcd75ff789fa17f4}{indices}}.reserve(len\ +\ points[0].size());}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ outerNode\ =\ linkedList(points[0],\ \textcolor{keyword}{true});}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!outerNode\ ||\ outerNode-\/>prev\ ==\ outerNode-\/>next)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (points.size()\ >\ 1)\ outerNode\ =\ eliminateHoles(points,\ outerNode);}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ the\ shape\ is\ not\ too\ simple,\ we'll\ use\ z-\/order\ curve\ hash\ later;\ calculate\ polygon\ bbox}}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ hashing\ =\ threshold\ <\ 0;}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hashing)\ \{}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ p\ =\ outerNode-\/>next;}
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ minX\ =\ maxX\ =\ outerNode-\/>x;}
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ minY\ =\ maxY\ =\ outerNode-\/>y;}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ p-\/>x;}
\DoxyCodeLine{00240\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ y\ =\ p-\/>y;}
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ minX\ =\ std::min<double>(minX,\ x);}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ minY\ =\ std::min<double>(minY,\ y);}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ maxX\ =\ std::max<double>(maxX,\ x);}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ maxY\ =\ std::max<double>(maxY,\ y);}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ p-\/>next;}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (p\ !=\ outerNode);}
\DoxyCodeLine{00247\ }
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ minX,\ minY\ and\ inv\_size\ are\ later\ used\ to\ transform\ coords\ into\ integers\ for\ z-\/order\ calculation}}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ inv\_size\ =\ std::max<double>(maxX\ -\/\ minX,\ maxY\ -\/\ minY);}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ inv\_size\ =\ inv\_size\ !=\ .0\ ?\ (32767.\ /\ inv\_size)\ :\ .0;}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ earcutLinked(outerNode);}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ nodes-\/>clear();}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ holeQueue.clear();}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ create\ a\ circular\ doubly\ linked\ list\ from\ polygon\ points\ in\ the\ specified\ winding\ order}}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00261\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Ring>}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ Earcut<N>::Node*\ Earcut<N>::linkedList(\textcolor{keyword}{const}\ Ring\&\ points,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ clockwise)\ \{}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }Point\ =\ \textcolor{keyword}{typename}\ Ring::value\_type;}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ sum\ =\ 0;}
\DoxyCodeLine{00265\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::size\_t\ len\ =\ points.size();}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \ \ \ \ std::size\_t\ i,\ j;}
\DoxyCodeLine{00267\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ last\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00268\ }
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ calculate\ original\ winding\ order\ of\ a\ polygon\ ring}}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0,\ j\ =\ len\ >\ 0\ ?\ len\ -\/\ 1\ :\ 0;\ i\ <\ len;\ j\ =\ i++)\ \{}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ p1\ =\ points[i];}
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ p2\ =\ points[j];}
\DoxyCodeLine{00273\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ p20\ =\ \mbox{\hyperlink{structmapbox_1_1util_1_1nth_a865d92b605b711c9427dfa5c3b4897f3}{util::nth<0,\ Point>::get}}(p2);}
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ p10\ =\ \mbox{\hyperlink{structmapbox_1_1util_1_1nth_a865d92b605b711c9427dfa5c3b4897f3}{util::nth<0,\ Point>::get}}(p1);}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ p11\ =\ \mbox{\hyperlink{structmapbox_1_1util_1_1nth_a865d92b605b711c9427dfa5c3b4897f3}{util::nth<1,\ Point>::get}}(p1);}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ p21\ =\ \mbox{\hyperlink{structmapbox_1_1util_1_1nth_a865d92b605b711c9427dfa5c3b4897f3}{util::nth<1,\ Point>::get}}(p2);}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ sum\ +=\ (p20\ -\/\ p10)\ *\ (p11\ +\ p21);}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ link\ points\ into\ circular\ doubly-\/linked\ list\ in\ the\ specified\ winding\ order}}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (clockwise\ ==\ (sum\ >\ 0))\ \{}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ len;\ i++)\ last\ =\ insertNode(vertices\ +\ i,\ points[i],\ last);}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00284\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ len;\ i-\/-\/\ >\ 0;)\ last\ =\ insertNode(vertices\ +\ i,\ points[i],\ last);}
\DoxyCodeLine{00286\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (last\ \&\&\ equals(last,\ last-\/>next))\ \{}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ removeNode(last);}
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ last\ =\ last-\/>next;}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00292\ }
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \ \ \ \ vertices\ +=\ len;}
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ last;}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00297\ }
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ eliminate\ colinear\ or\ duplicate\ points}}
\DoxyCodeLine{00299\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ Earcut<N>::Node*\ Earcut<N>::filterPoints(Node*\ start,\ Node*\ end)\ \{}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!end)\ end\ =\ start;}
\DoxyCodeLine{00302\ }
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ p\ =\ start;}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ again;}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ again\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!p-\/>steiner\ \&\&\ (equals(p,\ p-\/>next)\ ||\ area(p-\/>prev,\ p,\ p-\/>next)\ ==\ 0))\ \{}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ removeNode(p);}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ end\ =\ p-\/>prev;}
\DoxyCodeLine{00311\ }
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (p\ ==\ p-\/>next)\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ again\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ p-\/>next;}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (again\ ||\ p\ !=\ end);}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ end;}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ main\ ear\ slicing\ loop\ which\ triangulates\ a\ polygon\ (given\ as\ a\ linked\ list)}}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00326\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ Earcut<N>::earcutLinked(Node*\ ear,\ \textcolor{keywordtype}{int}\ pass)\ \{}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!ear)\ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00328\ }
\DoxyCodeLine{00329\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ interlink\ polygon\ nodes\ in\ z-\/order}}
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!pass\ \&\&\ hashing)\ indexCurve(ear);}
\DoxyCodeLine{00331\ }
\DoxyCodeLine{00332\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ stop\ =\ ear;}
\DoxyCodeLine{00333\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ prev;}
\DoxyCodeLine{00334\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ next;}
\DoxyCodeLine{00335\ }
\DoxyCodeLine{00336\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ iterate\ through\ ears,\ slicing\ them\ one\ by\ one}}
\DoxyCodeLine{00337\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (ear-\/>prev\ !=\ ear-\/>next)\ \{}
\DoxyCodeLine{00338\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ prev\ =\ ear-\/>prev;}
\DoxyCodeLine{00339\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ next\ =\ ear-\/>next;}
\DoxyCodeLine{00340\ }
\DoxyCodeLine{00341\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hashing\ ?\ isEarHashed(ear)\ :\ isEar(ear))\ \{}
\DoxyCodeLine{00342\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ cut\ off\ the\ triangle}}
\DoxyCodeLine{00343\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ indices.emplace\_back(prev-\/>i);}
\DoxyCodeLine{00344\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ indices.emplace\_back(ear-\/>i);}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ indices.emplace\_back(next-\/>i);}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00347\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ removeNode(ear);}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ skipping\ the\ next\ vertice\ leads\ to\ less\ sliver\ triangles}}
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ear\ =\ next-\/>next;}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stop\ =\ next-\/>next;}
\DoxyCodeLine{00352\ }
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00355\ }
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ear\ =\ next;}
\DoxyCodeLine{00357\ }
\DoxyCodeLine{00358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ we\ looped\ through\ the\ whole\ remaining\ polygon\ and\ can't\ find\ any\ more\ ears}}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ear\ ==\ stop)\ \{}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ try\ filtering\ points\ and\ slicing\ again}}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!pass)\ earcutLinked(filterPoints(ear),\ 1);}
\DoxyCodeLine{00362\ }
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ this\ didn't\ work,\ try\ curing\ all\ small\ self-\/intersections\ locally}}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (pass\ ==\ 1)\ \{}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ear\ =\ cureLocalIntersections(filterPoints(ear));}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ earcutLinked(ear,\ 2);}
\DoxyCodeLine{00367\ }
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ as\ a\ last\ resort,\ try\ splitting\ the\ remaining\ polygon\ into\ two}}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (pass\ ==\ 2)}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ splitEarcut(ear);}
\DoxyCodeLine{00372\ }
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00377\ }
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ check\ whether\ a\ polygon\ node\ forms\ a\ valid\ ear\ with\ adjacent\ nodes}}
\DoxyCodeLine{00379\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ Earcut<N>::isEar(Node*\ ear)\ \{}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Node*\ a\ =\ ear-\/>prev;}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Node*\ b\ =\ ear;}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Node*\ c\ =\ ear-\/>next;}
\DoxyCodeLine{00384\ }
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Create\ triangle\ with\ cached\ coordinates\ and\ bounding\ box}}
\DoxyCodeLine{00386\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Triangle\ tri(a,\ b,\ c);}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tri.area()\ >=\ 0)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ reflex,\ can't\ be\ an\ ear}}
\DoxyCodeLine{00388\ }
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ now\ make\ sure\ we\ don't\ have\ other\ points\ inside\ the\ potential\ ear}}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ p\ =\ ear-\/>next-\/>next;}
\DoxyCodeLine{00391\ }
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (p\ !=\ ear-\/>prev)\ \{}
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tri.containsPoint(p-\/>x,\ p-\/>y)\ \&\&\ area(p-\/>prev,\ p,\ p-\/>next)\ >=\ 0)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ p-\/>next;}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00396\ }
\DoxyCodeLine{00397\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00398\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00399\ }
\DoxyCodeLine{00400\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00401\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ Earcut<N>::isEarHashed(Node*\ ear)\ \{}
\DoxyCodeLine{00402\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Node*\ a\ =\ ear-\/>prev;}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Node*\ b\ =\ ear;}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Node*\ c\ =\ ear-\/>next;}
\DoxyCodeLine{00405\ }
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Create\ triangle\ with\ cached\ coordinates\ and\ bounding\ box}}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Triangle\ tri(a,\ b,\ c);}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tri.area()\ >=\ 0)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};\ \textcolor{comment}{//\ reflex,\ can't\ be\ an\ ear}}
\DoxyCodeLine{00409\ }
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ triangle\ bbox;\ min\ \&\ max\ are\ calculated\ like\ this\ for\ speed}}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ minTX\ =\ std::min<double>(tri.ax,\ std::min<double>(tri.bx,\ tri.cx));}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ minTY\ =\ std::min<double>(tri.ay,\ std::min<double>(tri.by,\ tri.cy));}
\DoxyCodeLine{00413\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ maxTX\ =\ std::max<double>(tri.ax,\ std::max<double>(tri.bx,\ tri.cx));}
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ maxTY\ =\ std::max<double>(tri.ay,\ std::max<double>(tri.by,\ tri.cy));}
\DoxyCodeLine{00415\ }
\DoxyCodeLine{00416\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ z-\/order\ range\ for\ the\ current\ triangle\ bbox;}}
\DoxyCodeLine{00417\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ int32\_t\ minZ\ =\ zOrder(minTX,\ minTY);}
\DoxyCodeLine{00418\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ int32\_t\ maxZ\ =\ zOrder(maxTX,\ maxTY);}
\DoxyCodeLine{00419\ }
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ first\ look\ for\ points\ inside\ the\ triangle\ in\ increasing\ z-\/order}}
\DoxyCodeLine{00421\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ p\ =\ ear-\/>nextZ;}
\DoxyCodeLine{00422\ }
\DoxyCodeLine{00423\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (p\ \&\&\ p-\/>z\ <=\ maxZ)\ \{}
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (p\ !=\ ear-\/>prev\ \&\&\ p\ !=\ ear-\/>next\ \&\&\ tri.containsPoint(p-\/>x,\ p-\/>y)\ \&\&\ area(p-\/>prev,\ p,\ p-\/>next)\ >=\ 0)}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00426\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ p-\/>nextZ;}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00428\ }
\DoxyCodeLine{00429\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ then\ look\ for\ points\ in\ decreasing\ z-\/order}}
\DoxyCodeLine{00430\ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ ear-\/>prevZ;}
\DoxyCodeLine{00431\ }
\DoxyCodeLine{00432\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (p\ \&\&\ p-\/>z\ >=\ minZ)\ \{}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (p\ !=\ ear-\/>prev\ \&\&\ p\ !=\ ear-\/>next\ \&\&\ tri.containsPoint(p-\/>x,\ p-\/>y)\ \&\&\ area(p-\/>prev,\ p,\ p-\/>next)\ >=\ 0)}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ p-\/>prevZ;}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00437\ }
\DoxyCodeLine{00438\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00440\ }
\DoxyCodeLine{00441\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ go\ through\ all\ polygon\ nodes\ and\ cure\ small\ local\ self-\/intersections}}
\DoxyCodeLine{00442\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ Earcut<N>::Node*\ Earcut<N>::cureLocalIntersections(Node*\ start)\ \{}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ p\ =\ start;}
\DoxyCodeLine{00445\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00446\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ a\ =\ p-\/>prev;}
\DoxyCodeLine{00447\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ b\ =\ p-\/>next-\/>next;}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00449\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ a\ self-\/intersection\ where\ edge\ (v[i-\/1],v[i])\ intersects\ (v[i+1],v[i+2])}}
\DoxyCodeLine{00450\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!equals(a,\ b)\ \&\&\ intersects(a,\ p,\ p-\/>next,\ b)\ \&\&\ locallyInside(a,\ b)\ \&\&\ locallyInside(b,\ a))\ \{}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ indices.emplace\_back(a-\/>i);}
\DoxyCodeLine{00452\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ indices.emplace\_back(p-\/>i);}
\DoxyCodeLine{00453\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ indices.emplace\_back(b-\/>i);}
\DoxyCodeLine{00454\ }
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ remove\ two\ nodes\ involved}}
\DoxyCodeLine{00456\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ removeNode(p);}
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ removeNode(p-\/>next);}
\DoxyCodeLine{00458\ }
\DoxyCodeLine{00459\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ start\ =\ b;}
\DoxyCodeLine{00460\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00461\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ p-\/>next;}
\DoxyCodeLine{00462\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (p\ !=\ start);}
\DoxyCodeLine{00463\ }
\DoxyCodeLine{00464\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ filterPoints(p);}
\DoxyCodeLine{00465\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00466\ }
\DoxyCodeLine{00467\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ try\ splitting\ polygon\ into\ two\ and\ triangulate\ them\ independently}}
\DoxyCodeLine{00468\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00469\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ Earcut<N>::splitEarcut(Node*\ start)\ \{}
\DoxyCodeLine{00470\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ look\ for\ a\ valid\ diagonal\ that\ divides\ the\ polygon\ into\ two}}
\DoxyCodeLine{00471\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ a\ =\ start;}
\DoxyCodeLine{00472\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00473\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ b\ =\ a-\/>next-\/>next;}
\DoxyCodeLine{00474\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (b\ !=\ a-\/>prev)\ \{}
\DoxyCodeLine{00475\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (a-\/>i\ !=\ b-\/>i\ \&\&\ isValidDiagonal(a,\ b))\ \{}
\DoxyCodeLine{00476\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ split\ the\ polygon\ in\ two\ by\ the\ diagonal}}
\DoxyCodeLine{00477\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ c\ =\ splitPolygon(a,\ b);}
\DoxyCodeLine{00478\ }
\DoxyCodeLine{00479\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ filter\ colinear\ points\ around\ the\ cuts}}
\DoxyCodeLine{00480\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ filterPoints(a,\ a-\/>next);}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ c\ =\ filterPoints(c,\ c-\/>next);}
\DoxyCodeLine{00482\ }
\DoxyCodeLine{00483\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ run\ earcut\ on\ each\ half}}
\DoxyCodeLine{00484\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ earcutLinked(a);}
\DoxyCodeLine{00485\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ earcutLinked(c);}
\DoxyCodeLine{00486\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ b\ =\ b-\/>next;}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00490\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ a\ =\ a-\/>next;}
\DoxyCodeLine{00491\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (a\ !=\ start);}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00493\ }
\DoxyCodeLine{00494\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ link\ every\ hole\ into\ the\ outer\ loop,\ producing\ a\ single-\/ring\ polygon\ without\ holes}}
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00496\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Polygon>}
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ Earcut<N>::Node*\ Earcut<N>::eliminateHoles(\textcolor{keyword}{const}\ Polygon\&\ points,\ Node*\ outerNode)\ \{}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ len\ =\ points.size();}
\DoxyCodeLine{00499\ }
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ \ \ \ \ holeQueue.clear();}
\DoxyCodeLine{00501\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 1;\ i\ <\ len;\ i++)\ \{}
\DoxyCodeLine{00502\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ list\ =\ linkedList(points[i],\ \textcolor{keyword}{false});}
\DoxyCodeLine{00503\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (list)\ \{}
\DoxyCodeLine{00504\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (list\ ==\ list-\/>next)\ list-\/>steiner\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00505\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ holeQueue.push\_back(getLeftmost(list));}
\DoxyCodeLine{00506\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \ \ \ \ std::sort(holeQueue.begin(),\ holeQueue.end(),\ [](\textcolor{keyword}{const}\ Node*\ a,\ \textcolor{keyword}{const}\ Node*\ b)\ \{\ return\ a-\/>x\ <\ b-\/>x;\ \});}
\DoxyCodeLine{00509\ }
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ process\ holes\ from\ left\ to\ right}}
\DoxyCodeLine{00511\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ holeQueue.size();\ i++)\ \{}
\DoxyCodeLine{00512\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ outerNode\ =\ eliminateHole(holeQueue[i],\ outerNode);}
\DoxyCodeLine{00513\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00514\ }
\DoxyCodeLine{00515\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ outerNode;}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00517\ }
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ find\ a\ bridge\ between\ vertices\ that\ connects\ hole\ with\ an\ outer\ ring\ and\ and\ link\ it}}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ Earcut<N>::Node*\ Earcut<N>::eliminateHole(Node*\ hole,\ Node*\ outerNode)\ \{}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ bridge\ =\ findHoleBridge(hole,\ outerNode);}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!bridge)\ \{}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ outerNode;}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00525\ }
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ bridgeReverse\ =\ splitPolygon(bridge,\ hole);}
\DoxyCodeLine{00527\ }
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ filter\ collinear\ points\ around\ the\ cuts}}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ \ \ \ \ filterPoints(bridgeReverse,\ bridgeReverse-\/>next);}
\DoxyCodeLine{00530\ }
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ if\ input\ node\ was\ removed\ by\ the\ filtering}}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ filterPoints(bridge,\ bridge-\/>next);}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00534\ }
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ David\ Eberly's\ algorithm\ for\ finding\ a\ bridge\ between\ hole\ and\ outer\ polygon}}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ Earcut<N>::Node*\ Earcut<N>::findHoleBridge(Node*\ hole,\ Node*\ outerNode)\ \{}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ p\ =\ outerNode;}
\DoxyCodeLine{00539\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ hx\ =\ hole-\/>x;}
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ hy\ =\ hole-\/>y;}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ qx\ =\ -\/std::numeric\_limits<double>::infinity();}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ m\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00543\ }
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ find\ a\ segment\ intersected\ by\ a\ ray\ from\ the\ hole's\ leftmost\ Vertex\ to\ the\ left;}}
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ segment's\ endpoint\ with\ lesser\ x\ will\ be\ potential\ connection\ Vertex}}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hy\ <=\ p-\/>y\ \&\&\ hy\ >=\ p-\/>next-\/>y\ \&\&\ p-\/>next-\/>y\ !=\ p-\/>y)\ \{}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ x\ =\ p-\/>x\ +\ (hy\ -\/\ p-\/>y)\ *\ (p-\/>next-\/>x\ -\/\ p-\/>x)\ /\ (p-\/>next-\/>y\ -\/\ p-\/>y);}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ <=\ hx\ \&\&\ x\ >\ qx)\ \{}
\DoxyCodeLine{00550\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ qx\ =\ x;}
\DoxyCodeLine{00551\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\ =\ p-\/>x\ <\ p-\/>next-\/>x\ ?\ p\ :\ p-\/>next;}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ ==\ hx)\ \textcolor{keywordflow}{return}\ m;\ \textcolor{comment}{//\ hole\ touches\ outer\ segment;\ pick\ leftmost\ endpoint}}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00554\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00555\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ p-\/>next;}
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (p\ !=\ outerNode);}
\DoxyCodeLine{00557\ }
\DoxyCodeLine{00558\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!m)\ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00559\ }
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ look\ for\ points\ inside\ the\ triangle\ of\ hole\ Vertex,\ segment\ intersection\ and\ endpoint;}}
\DoxyCodeLine{00561\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ if\ there\ are\ no\ points\ found,\ we\ have\ a\ valid\ connection;}}
\DoxyCodeLine{00562\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ otherwise\ choose\ the\ Vertex\ of\ the\ minimum\ angle\ with\ the\ ray\ as\ connection\ Vertex}}
\DoxyCodeLine{00563\ }
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Node*\ stop\ =\ m;}
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ tanMin\ =\ std::numeric\_limits<double>::infinity();}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ tanCur\ =\ 0;}
\DoxyCodeLine{00567\ }
\DoxyCodeLine{00568\ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ m;}
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ mx\ =\ m-\/>x;}
\DoxyCodeLine{00570\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ my\ =\ m-\/>y;}
\DoxyCodeLine{00571\ }
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (hx\ >=\ p-\/>x\ \&\&\ p-\/>x\ >=\ mx\ \&\&\ hx\ !=\ p-\/>x\ \&\&}
\DoxyCodeLine{00574\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pointInTriangle(hy\ <\ my\ ?\ hx\ :\ qx,\ hy,\ mx,\ my,\ hy\ <\ my\ ?\ qx\ :\ hx,\ hy,\ p-\/>x,\ p-\/>y))\ \{}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tanCur\ =\ std::abs(hy\ -\/\ p-\/>y)\ /\ (hx\ -\/\ p-\/>x);\ \textcolor{comment}{//\ tangential}}
\DoxyCodeLine{00576\ }
\DoxyCodeLine{00577\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (locallyInside(p,\ hole)\ \&\&}
\DoxyCodeLine{00578\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (tanCur\ <\ tanMin\ ||\ (tanCur\ ==\ tanMin\ \&\&\ (p-\/>x\ >\ m-\/>x\ ||\ sectorContainsSector(m,\ p)))))\ \{}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\ =\ p;}
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tanMin\ =\ tanCur;}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00583\ }
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ p-\/>next;}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (p\ !=\ stop);}
\DoxyCodeLine{00586\ }
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m;}
\DoxyCodeLine{00588\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00589\ }
\DoxyCodeLine{00590\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ whether\ sector\ in\ vertex\ m\ contains\ sector\ in\ vertex\ p\ in\ the\ same\ coordinates}}
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ Earcut<N>::sectorContainsSector(\textcolor{keyword}{const}\ Node*\ m,\ \textcolor{keyword}{const}\ Node*\ p)\ \{}
\DoxyCodeLine{00593\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ area(m-\/>prev,\ m,\ p-\/>prev)\ <\ 0\ \&\&\ area(p-\/>next,\ m,\ m-\/>next)\ <\ 0;}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00595\ }
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ interlink\ polygon\ nodes\ in\ z-\/order}}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ Earcut<N>::indexCurve(Node*\ start)\ \{}
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ \ \ \ \ assert(start);}
\DoxyCodeLine{00600\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ p\ =\ start;}
\DoxyCodeLine{00601\ }
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p-\/>z\ =\ p-\/>z\ ?\ p-\/>z\ :\ zOrder(p-\/>x,\ p-\/>y);}
\DoxyCodeLine{00604\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p-\/>prevZ\ =\ p-\/>prev;}
\DoxyCodeLine{00605\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p-\/>nextZ\ =\ p-\/>next;}
\DoxyCodeLine{00606\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ p-\/>next;}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (p\ !=\ start);}
\DoxyCodeLine{00608\ }
\DoxyCodeLine{00609\ \ \ \ \ \ \ \ \ \ \ \ \ p-\/>prevZ-\/>nextZ\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00610\ \ \ \ \ \ \ \ \ \ \ \ \ p-\/>prevZ\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00611\ }
\DoxyCodeLine{00612\ \ \ \ \ \ \ \ \ \ \ \ \ sortLinked(p);}
\DoxyCodeLine{00613\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00614\ }
\DoxyCodeLine{00615\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Simon\ Tatham's\ linked\ list\ merge\ sort\ algorithm}}
\DoxyCodeLine{00616\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ http://www.chiark.greenend.org.uk/\string~sgtatham/algorithms/listsort.html}}
\DoxyCodeLine{00617\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00618\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ Earcut<N>::Node*\ Earcut<N>::sortLinked(Node*\ list)\ \{}
\DoxyCodeLine{00619\ \ \ \ \ \ \ \ \ \ \ \ \ assert(list);}
\DoxyCodeLine{00620\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ p;}
\DoxyCodeLine{00621\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ q;}
\DoxyCodeLine{00622\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ e;}
\DoxyCodeLine{00623\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ tail;}
\DoxyCodeLine{00624\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ i,\ numMerges,\ pSize,\ qSize;}
\DoxyCodeLine{00625\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ inSize\ =\ 1;}
\DoxyCodeLine{00626\ }
\DoxyCodeLine{00627\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;;)\ \{}
\DoxyCodeLine{00628\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ list;}
\DoxyCodeLine{00629\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ list\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00630\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tail\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00631\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ numMerges\ =\ 0;}
\DoxyCodeLine{00632\ }
\DoxyCodeLine{00633\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (p)\ \{}
\DoxyCodeLine{00634\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ numMerges++;}
\DoxyCodeLine{00635\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ q\ =\ p;}
\DoxyCodeLine{00636\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pSize\ =\ 0;}
\DoxyCodeLine{00637\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ inSize;\ i++)\ \{}
\DoxyCodeLine{00638\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pSize++;}
\DoxyCodeLine{00639\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ q\ =\ q-\/>nextZ;}
\DoxyCodeLine{00640\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!q)\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00641\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00642\ }
\DoxyCodeLine{00643\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ qSize\ =\ inSize;}
\DoxyCodeLine{00644\ }
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (pSize\ >\ 0\ ||\ (qSize\ >\ 0\ \&\&\ q))\ \{}
\DoxyCodeLine{00646\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (pSize\ ==\ 0)\ \{}
\DoxyCodeLine{00647\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\ =\ q;}
\DoxyCodeLine{00648\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ q\ =\ q-\/>nextZ;}
\DoxyCodeLine{00649\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ qSize-\/-\/;}
\DoxyCodeLine{00650\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (qSize\ ==\ 0\ ||\ !q)\ \{}
\DoxyCodeLine{00652\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\ =\ p;}
\DoxyCodeLine{00653\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ p-\/>nextZ;}
\DoxyCodeLine{00654\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pSize-\/-\/;}
\DoxyCodeLine{00655\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00656\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (p-\/>z\ <=\ q-\/>z)\ \{}
\DoxyCodeLine{00657\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\ =\ p;}
\DoxyCodeLine{00658\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ p-\/>nextZ;}
\DoxyCodeLine{00659\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ pSize-\/-\/;}
\DoxyCodeLine{00660\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00661\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00662\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e\ =\ q;}
\DoxyCodeLine{00663\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ q\ =\ q-\/>nextZ;}
\DoxyCodeLine{00664\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ qSize-\/-\/;}
\DoxyCodeLine{00665\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00666\ }
\DoxyCodeLine{00667\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (tail)}
\DoxyCodeLine{00668\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tail-\/>nextZ\ =\ e;}
\DoxyCodeLine{00669\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00670\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ list\ =\ e;}
\DoxyCodeLine{00671\ }
\DoxyCodeLine{00672\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ e-\/>prevZ\ =\ tail;}
\DoxyCodeLine{00673\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tail\ =\ e;}
\DoxyCodeLine{00674\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00675\ }
\DoxyCodeLine{00676\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ q;}
\DoxyCodeLine{00677\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00678\ }
\DoxyCodeLine{00679\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tail-\/>nextZ\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00680\ }
\DoxyCodeLine{00681\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (numMerges\ <=\ 1)\ \textcolor{keywordflow}{return}\ list;}
\DoxyCodeLine{00682\ }
\DoxyCodeLine{00683\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ inSize\ *=\ 2;}
\DoxyCodeLine{00684\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00685\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00686\ }
\DoxyCodeLine{00687\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ z-\/order\ of\ a\ Vertex\ given\ coords\ and\ size\ of\ the\ data\ bounding\ box}}
\DoxyCodeLine{00688\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00689\ \ \ \ \ \ \ \ \ int32\_t\ Earcut<N>::zOrder(\textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ x\_,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ y\_)\ \{}
\DoxyCodeLine{00690\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ coords\ are\ transformed\ into\ non-\/negative\ 15-\/bit\ integer\ range}}
\DoxyCodeLine{00691\ \ \ \ \ \ \ \ \ \ \ \ \ int32\_t\ x\ =\ \textcolor{keyword}{static\_cast<}int32\_t\textcolor{keyword}{>}((x\_\ -\/\ minX)\ *\ inv\_size);}
\DoxyCodeLine{00692\ \ \ \ \ \ \ \ \ \ \ \ \ int32\_t\ y\ =\ \textcolor{keyword}{static\_cast<}int32\_t\textcolor{keyword}{>}((y\_\ -\/\ minY)\ *\ inv\_size);}
\DoxyCodeLine{00693\ }
\DoxyCodeLine{00694\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ (x\ |\ (x\ <<\ 8))\ \&\ 0x00FF00FF;}
\DoxyCodeLine{00695\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ (x\ |\ (x\ <<\ 4))\ \&\ 0x0F0F0F0F;}
\DoxyCodeLine{00696\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ (x\ |\ (x\ <<\ 2))\ \&\ 0x33333333;}
\DoxyCodeLine{00697\ \ \ \ \ \ \ \ \ \ \ \ \ x\ =\ (x\ |\ (x\ <<\ 1))\ \&\ 0x55555555;}
\DoxyCodeLine{00698\ }
\DoxyCodeLine{00699\ \ \ \ \ \ \ \ \ \ \ \ \ y\ =\ (y\ |\ (y\ <<\ 8))\ \&\ 0x00FF00FF;}
\DoxyCodeLine{00700\ \ \ \ \ \ \ \ \ \ \ \ \ y\ =\ (y\ |\ (y\ <<\ 4))\ \&\ 0x0F0F0F0F;}
\DoxyCodeLine{00701\ \ \ \ \ \ \ \ \ \ \ \ \ y\ =\ (y\ |\ (y\ <<\ 2))\ \&\ 0x33333333;}
\DoxyCodeLine{00702\ \ \ \ \ \ \ \ \ \ \ \ \ y\ =\ (y\ |\ (y\ <<\ 1))\ \&\ 0x55555555;}
\DoxyCodeLine{00703\ }
\DoxyCodeLine{00704\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ x\ |\ (y\ <<\ 1);}
\DoxyCodeLine{00705\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00706\ }
\DoxyCodeLine{00707\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ find\ the\ leftmost\ node\ of\ a\ polygon\ ring}}
\DoxyCodeLine{00708\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00709\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ Earcut<N>::Node*\ Earcut<N>::getLeftmost(Node*\ start)\ \{}
\DoxyCodeLine{00710\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ p\ =\ start;}
\DoxyCodeLine{00711\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ leftmost\ =\ start;}
\DoxyCodeLine{00712\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00713\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (p-\/>x\ <\ leftmost-\/>x\ ||\ (p-\/>x\ ==\ leftmost-\/>x\ \&\&\ p-\/>y\ <\ leftmost-\/>y))\ leftmost\ =\ p;}
\DoxyCodeLine{00714\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ p-\/>next;}
\DoxyCodeLine{00715\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (p\ !=\ start);}
\DoxyCodeLine{00716\ }
\DoxyCodeLine{00717\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ leftmost;}
\DoxyCodeLine{00718\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00719\ }
\DoxyCodeLine{00720\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ check\ if\ a\ point\ lies\ within\ a\ convex\ triangle}}
\DoxyCodeLine{00721\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00722\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ Earcut<N>::pointInTriangle(}
\DoxyCodeLine{00723\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ ax,\ \textcolor{keywordtype}{double}\ ay,\ \textcolor{keywordtype}{double}\ bx,\ \textcolor{keywordtype}{double}\ by,\ \textcolor{keywordtype}{double}\ cx,\ \textcolor{keywordtype}{double}\ cy,\ \textcolor{keywordtype}{double}\ px,\ \textcolor{keywordtype}{double}\ py)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00724\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (cx\ -\/\ px)\ *\ (ay\ -\/\ py)\ >=\ (ax\ -\/\ px)\ *\ (cy\ -\/\ py)\ \&\&\ (ax\ -\/\ px)\ *\ (by\ -\/\ py)\ >=\ (bx\ -\/\ px)\ *\ (ay\ -\/\ py)\ \&\&}
\DoxyCodeLine{00725\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (bx\ -\/\ px)\ *\ (cy\ -\/\ py)\ >=\ (cx\ -\/\ px)\ *\ (by\ -\/\ py);}
\DoxyCodeLine{00726\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00727\ }
\DoxyCodeLine{00728\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ check\ if\ a\ diagonal\ between\ two\ polygon\ nodes\ is\ valid\ (lies\ in\ polygon\ interior)}}
\DoxyCodeLine{00729\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00730\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ Earcut<N>::isValidDiagonal(Node*\ a,\ Node*\ b)\ \{}
\DoxyCodeLine{00731\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ a-\/>next-\/>i\ !=\ b-\/>i\ \&\&\ a-\/>prev-\/>i\ !=\ b-\/>i\ \&\&\ !intersectsPolygon(a,\ b)\ \&\&\ \textcolor{comment}{//\ dones't\ intersect\ other\ edges}}
\DoxyCodeLine{00732\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((locallyInside(a,\ b)\ \&\&\ locallyInside(b,\ a)\ \&\&\ middleInside(a,\ b)\ \&\&\ \ \ \textcolor{comment}{//\ locally\ visible}}
\DoxyCodeLine{00733\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (area(a-\/>prev,\ a,\ b-\/>prev)\ !=\ 0.0\ ||}
\DoxyCodeLine{00734\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ area(a,\ b-\/>prev,\ b)\ !=\ 0.0))\ ||\ \textcolor{comment}{//\ does\ not\ create\ opposite-\/facing\ sectors}}
\DoxyCodeLine{00735\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (equals(a,\ b)\ \&\&\ area(a-\/>prev,\ a,\ a-\/>next)\ >\ 0\ \&\&}
\DoxyCodeLine{00736\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ area(b-\/>prev,\ b,\ b-\/>next)\ >\ 0));\ \textcolor{comment}{//\ special\ zero-\/length\ case}}
\DoxyCodeLine{00737\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00738\ }
\DoxyCodeLine{00739\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ signed\ area\ of\ a\ triangle}}
\DoxyCodeLine{00740\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00741\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ Earcut<N>::area(\textcolor{keyword}{const}\ Node*\ p,\ \textcolor{keyword}{const}\ Node*\ q,\ \textcolor{keyword}{const}\ Node*\ r)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00742\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (q-\/>y\ -\/\ p-\/>y)\ *\ (r-\/>x\ -\/\ q-\/>x)\ -\/\ (q-\/>x\ -\/\ p-\/>x)\ *\ (r-\/>y\ -\/\ q-\/>y);}
\DoxyCodeLine{00743\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00744\ }
\DoxyCodeLine{00745\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ check\ if\ two\ points\ are\ equal}}
\DoxyCodeLine{00746\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00747\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ Earcut<N>::equals(\textcolor{keyword}{const}\ Node*\ p1,\ \textcolor{keyword}{const}\ Node*\ p2)\ \{}
\DoxyCodeLine{00748\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ p1-\/>x\ ==\ p2-\/>x\ \&\&\ p1-\/>y\ ==\ p2-\/>y;}
\DoxyCodeLine{00749\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00750\ }
\DoxyCodeLine{00751\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ check\ if\ two\ segments\ intersect}}
\DoxyCodeLine{00752\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00753\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ Earcut<N>::intersects(\textcolor{keyword}{const}\ Node*\ p1,\ \textcolor{keyword}{const}\ Node*\ q1,\ \textcolor{keyword}{const}\ Node*\ p2,\ \textcolor{keyword}{const}\ Node*\ q2)\ \{}
\DoxyCodeLine{00754\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ o1\ =\ sign(area(p1,\ q1,\ p2));}
\DoxyCodeLine{00755\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ o2\ =\ sign(area(p1,\ q1,\ q2));}
\DoxyCodeLine{00756\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ o3\ =\ sign(area(p2,\ q2,\ p1));}
\DoxyCodeLine{00757\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ o4\ =\ sign(area(p2,\ q2,\ q1));}
\DoxyCodeLine{00758\ }
\DoxyCodeLine{00759\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (o1\ !=\ o2\ \&\&\ o3\ !=\ o4)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \textcolor{comment}{//\ general\ case}}
\DoxyCodeLine{00760\ }
\DoxyCodeLine{00761\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (o1\ ==\ 0\ \&\&\ onSegment(p1,\ p2,\ q1))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \textcolor{comment}{//\ p1,\ q1\ and\ p2\ are\ collinear\ and\ p2\ lies\ on\ p1q1}}
\DoxyCodeLine{00762\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (o2\ ==\ 0\ \&\&\ onSegment(p1,\ q2,\ q1))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \textcolor{comment}{//\ p1,\ q1\ and\ q2\ are\ collinear\ and\ q2\ lies\ on\ p1q1}}
\DoxyCodeLine{00763\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (o3\ ==\ 0\ \&\&\ onSegment(p2,\ p1,\ q2))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \textcolor{comment}{//\ p2,\ q2\ and\ p1\ are\ collinear\ and\ p1\ lies\ on\ p2q2}}
\DoxyCodeLine{00764\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (o4\ ==\ 0\ \&\&\ onSegment(p2,\ q1,\ q2))\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};\ \textcolor{comment}{//\ p2,\ q2\ and\ q1\ are\ collinear\ and\ q1\ lies\ on\ p2q2}}
\DoxyCodeLine{00765\ }
\DoxyCodeLine{00766\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00767\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00768\ }
\DoxyCodeLine{00769\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ for\ collinear\ points\ p,\ q,\ r,\ check\ if\ point\ q\ lies\ on\ segment\ pr}}
\DoxyCodeLine{00770\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00771\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ Earcut<N>::onSegment(\textcolor{keyword}{const}\ Node*\ p,\ \textcolor{keyword}{const}\ Node*\ q,\ \textcolor{keyword}{const}\ Node*\ r)\ \{}
\DoxyCodeLine{00772\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ q-\/>x\ <=\ std::max<double>(p-\/>x,\ r-\/>x)\ \&\&\ q-\/>x\ >=\ std::min<double>(p-\/>x,\ r-\/>x)\ \&\&}
\DoxyCodeLine{00773\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ q-\/>y\ <=\ std::max<double>(p-\/>y,\ r-\/>y)\ \&\&\ q-\/>y\ >=\ std::min<double>(p-\/>y,\ r-\/>y);}
\DoxyCodeLine{00774\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00775\ }
\DoxyCodeLine{00776\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00777\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ Earcut<N>::sign(\textcolor{keywordtype}{double}\ val)\ \{}
\DoxyCodeLine{00778\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (0.0\ <\ val)\ -\/\ (val\ <\ 0.0);}
\DoxyCodeLine{00779\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00780\ }
\DoxyCodeLine{00781\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ check\ if\ a\ polygon\ diagonal\ intersects\ any\ polygon\ segments}}
\DoxyCodeLine{00782\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00783\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ Earcut<N>::intersectsPolygon(\textcolor{keyword}{const}\ Node*\ a,\ \textcolor{keyword}{const}\ Node*\ b)\ \{}
\DoxyCodeLine{00784\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Node*\ p\ =\ a;}
\DoxyCodeLine{00785\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00786\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (p-\/>i\ !=\ a-\/>i\ \&\&\ p-\/>next-\/>i\ !=\ a-\/>i\ \&\&\ p-\/>i\ !=\ b-\/>i\ \&\&\ p-\/>next-\/>i\ !=\ b-\/>i\ \&\&\ intersects(p,\ p-\/>next,\ a,\ b))}
\DoxyCodeLine{00787\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00788\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ p-\/>next;}
\DoxyCodeLine{00789\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (p\ !=\ a);}
\DoxyCodeLine{00790\ }
\DoxyCodeLine{00791\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00792\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00793\ }
\DoxyCodeLine{00794\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ check\ if\ a\ polygon\ diagonal\ is\ locally\ inside\ the\ polygon}}
\DoxyCodeLine{00795\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00796\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ Earcut<N>::locallyInside(\textcolor{keyword}{const}\ Node*\ a,\ \textcolor{keyword}{const}\ Node*\ b)\ \{}
\DoxyCodeLine{00797\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ area(a-\/>prev,\ a,\ a-\/>next)\ <\ 0\ ?\ area(a,\ b,\ a-\/>next)\ >=\ 0\ \&\&\ area(a,\ a-\/>prev,\ b)\ >=\ 0}
\DoxyCodeLine{00798\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ :\ area(a,\ b,\ a-\/>prev)\ <\ 0\ ||\ area(a,\ a-\/>next,\ b)\ <\ 0;}
\DoxyCodeLine{00799\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00800\ }
\DoxyCodeLine{00801\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ check\ if\ the\ middle\ Vertex\ of\ a\ polygon\ diagonal\ is\ inside\ the\ polygon}}
\DoxyCodeLine{00802\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00803\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ Earcut<N>::middleInside(\textcolor{keyword}{const}\ Node*\ a,\ \textcolor{keyword}{const}\ Node*\ b)\ \{}
\DoxyCodeLine{00804\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ Node*\ p\ =\ a;}
\DoxyCodeLine{00805\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ inside\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00806\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ px\ =\ (a-\/>x\ +\ b-\/>x)\ /\ 2;}
\DoxyCodeLine{00807\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ py\ =\ (a-\/>y\ +\ b-\/>y)\ /\ 2;}
\DoxyCodeLine{00808\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\ \{}
\DoxyCodeLine{00809\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (((p-\/>y\ >\ py)\ !=\ (p-\/>next-\/>y\ >\ py))\ \&\&\ p-\/>next-\/>y\ !=\ p-\/>y\ \&\&}
\DoxyCodeLine{00810\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ (px\ <\ (p-\/>next-\/>x\ -\/\ p-\/>x)\ *\ (py\ -\/\ p-\/>y)\ /\ (p-\/>next-\/>y\ -\/\ p-\/>y)\ +\ p-\/>x))}
\DoxyCodeLine{00811\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ inside\ =\ !inside;}
\DoxyCodeLine{00812\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p\ =\ p-\/>next;}
\DoxyCodeLine{00813\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}\ (p\ !=\ a);}
\DoxyCodeLine{00814\ }
\DoxyCodeLine{00815\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ inside;}
\DoxyCodeLine{00816\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00817\ }
\DoxyCodeLine{00818\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ link\ two\ polygon\ vertices\ with\ a\ bridge;\ if\ the\ vertices\ belong\ to\ the\ same\ ring,\ it\ splits}}
\DoxyCodeLine{00819\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ polygon\ into\ two;\ if\ one\ belongs\ to\ the\ outer\ ring\ and\ another\ to\ a\ hole,\ it\ merges\ it\ into\ a}}
\DoxyCodeLine{00820\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ single\ ring}}
\DoxyCodeLine{00821\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00822\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ Earcut<N>::Node*\ Earcut<N>::splitPolygon(Node*\ a,\ Node*\ b)\ \{}
\DoxyCodeLine{00823\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ a2\ =\ nodes-\/>construct(a-\/>i,\ a-\/>x,\ a-\/>y);}
\DoxyCodeLine{00824\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ b2\ =\ nodes-\/>construct(b-\/>i,\ b-\/>x,\ b-\/>y);}
\DoxyCodeLine{00825\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ an\ =\ a-\/>next;}
\DoxyCodeLine{00826\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ bp\ =\ b-\/>prev;}
\DoxyCodeLine{00827\ }
\DoxyCodeLine{00828\ \ \ \ \ \ \ \ \ \ \ \ \ a-\/>next\ =\ b;}
\DoxyCodeLine{00829\ \ \ \ \ \ \ \ \ \ \ \ \ b-\/>prev\ =\ a;}
\DoxyCodeLine{00830\ }
\DoxyCodeLine{00831\ \ \ \ \ \ \ \ \ \ \ \ \ a2-\/>next\ =\ an;}
\DoxyCodeLine{00832\ \ \ \ \ \ \ \ \ \ \ \ \ an-\/>prev\ =\ a2;}
\DoxyCodeLine{00833\ }
\DoxyCodeLine{00834\ \ \ \ \ \ \ \ \ \ \ \ \ b2-\/>next\ =\ a2;}
\DoxyCodeLine{00835\ \ \ \ \ \ \ \ \ \ \ \ \ a2-\/>prev\ =\ b2;}
\DoxyCodeLine{00836\ }
\DoxyCodeLine{00837\ \ \ \ \ \ \ \ \ \ \ \ \ bp-\/>next\ =\ b2;}
\DoxyCodeLine{00838\ \ \ \ \ \ \ \ \ \ \ \ \ b2-\/>prev\ =\ bp;}
\DoxyCodeLine{00839\ }
\DoxyCodeLine{00840\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ b2;}
\DoxyCodeLine{00841\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00842\ }
\DoxyCodeLine{00843\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ create\ a\ node\ and\ util::optionally\ link\ it\ with\ previous\ one\ (in\ a\ circular\ doubly\ linked\ list)}}
\DoxyCodeLine{00844\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00845\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ Po\textcolor{keywordtype}{int}>}
\DoxyCodeLine{00846\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ Earcut<N>::Node*\ Earcut<N>::insertNode(std::size\_t\ i,\ \textcolor{keyword}{const}\ Point\&\ pt,\ Node*\ last)\ \{}
\DoxyCodeLine{00847\ \ \ \ \ \ \ \ \ \ \ \ \ Node*\ p\ =\ nodes-\/>construct(\textcolor{keyword}{static\_cast<}N\textcolor{keyword}{>}(i),\ \mbox{\hyperlink{structmapbox_1_1util_1_1nth_a865d92b605b711c9427dfa5c3b4897f3}{util::nth<0,\ Point>::get}}(pt),\ \mbox{\hyperlink{structmapbox_1_1util_1_1nth_a865d92b605b711c9427dfa5c3b4897f3}{util::nth<1,\ Point>::get}}(pt));}
\DoxyCodeLine{00848\ }
\DoxyCodeLine{00849\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!last)\ \{}
\DoxyCodeLine{00850\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p-\/>prev\ =\ p;}
\DoxyCodeLine{00851\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p-\/>next\ =\ p;}
\DoxyCodeLine{00852\ }
\DoxyCodeLine{00853\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00854\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00855\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ assert(last);}
\DoxyCodeLine{00856\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p-\/>next\ =\ last-\/>next;}
\DoxyCodeLine{00857\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ p-\/>prev\ =\ last;}
\DoxyCodeLine{00858\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ last-\/>next-\/>prev\ =\ p;}
\DoxyCodeLine{00859\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ last-\/>next\ =\ p;}
\DoxyCodeLine{00860\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00861\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ p;}
\DoxyCodeLine{00862\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00863\ }
\DoxyCodeLine{00864\ \ \ \ \ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N>}
\DoxyCodeLine{00865\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ Earcut<N>::removeNode(Node*\ p)\ \{}
\DoxyCodeLine{00866\ \ \ \ \ \ \ \ \ \ \ \ \ p-\/>next-\/>prev\ =\ p-\/>prev;}
\DoxyCodeLine{00867\ \ \ \ \ \ \ \ \ \ \ \ \ p-\/>prev-\/>next\ =\ p-\/>next;}
\DoxyCodeLine{00868\ }
\DoxyCodeLine{00869\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (p-\/>prevZ)\ p-\/>prevZ-\/>nextZ\ =\ p-\/>nextZ;}
\DoxyCodeLine{00870\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (p-\/>nextZ)\ p-\/>nextZ-\/>prevZ\ =\ p-\/>prevZ;}
\DoxyCodeLine{00871\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00872\ \ \ \ \ \}\ \textcolor{comment}{//\ namespace\ detail}}
\DoxyCodeLine{00873\ }
\DoxyCodeLine{00874\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ N\ =\ u\textcolor{keywordtype}{int}32\_t,\ \textcolor{keyword}{typename}\ Polygon>}
\DoxyCodeLine{00875\ \ \ \ \ std::vector<N>\ \mbox{\hyperlink{namespacemapbox_a0c085f2ed724337fb9296426503fe7f1}{earcut}}(\textcolor{keyword}{const}\ Polygon\&\ poly)\ \{}
\DoxyCodeLine{00876\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classmapbox_1_1detail_1_1_earcut}{mapbox::detail::Earcut<N>}}\ \mbox{\hyperlink{namespacemapbox_a0c085f2ed724337fb9296426503fe7f1}{earcut}};}
\DoxyCodeLine{00877\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespacemapbox_a0c085f2ed724337fb9296426503fe7f1}{earcut}}(poly);}
\DoxyCodeLine{00878\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::move(\mbox{\hyperlink{namespacemapbox_a0c085f2ed724337fb9296426503fe7f1}{earcut}}.indices);}
\DoxyCodeLine{00879\ \ \ \ \ \}}
\DoxyCodeLine{00880\ \}\ \textcolor{comment}{//\ namespace\ mapbox}}

\end{DoxyCode}
